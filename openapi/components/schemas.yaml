components:
  schemas:
    ValrStatus:
      type: object
      properties:
        status:
          type: string
          description: VALR platform status
          enum: [online, read-only]
          example: online
    ServerTime:
      type: object
      properties:
        epochTime:
          type: integer
          format: int64
          description: The server time in epoch seconds
          example: 1750165361
        time:
          type: string
          format: date-time
          description: The server time in ISO 8601 format
          example: "2025-06-17T13:02:41.280178906Z"
    ErrorResponse:
      type: object
      properties:
        code:
          type: string
          example: INTERNAL_ERROR
        message:
          type: string
          example: Unexpected error occurred
    LeverageOption:
      type: object
      properties:
        pairSymbol:
          type: string
          description: The symbol of the pair being queried
          example: BTCUSDTPERP
        leverageMultiple:
          type: integer
          description: The debt-to-equity ratio, which is also the inverse of margin fraction
          example: 10
        initialMarginFraction:
          type: number
          format: double
          description: The initial margin fraction required to place an order
          example: 0.1
        maintenanceMarginFraction:
          type: number
          format: double
          description: The maintenance margin fraction below which stage 1 liquidation is triggered
          example: 0.05
        autoCloseMarginFraction:
          type: number
          format: double
          description: The account margin fraction below which an account's debt and assets are transferred to the insurance fund
          example: 0.0083
        riskLimitValue:
          type: number
          format: double
          description: The maximum position size in the chosen leverage tier in riskLimitCurrency
          example: 750000
        riskLimitCurrency:
          type: string
          description: The currency symbol that the risk limit is specified in
          example: USDT
        isDefault:
          type: boolean
          description: When true this indicates that this leverage tier is the VALR default for this pair
          example: true
    SupportedNetwork:
      type: object
      properties:
        networkType:
          type: string
          description: The network type identifier
          example: Ethereum
        networkLongName:
          type: string
          description: The full name of the network
          example: Ethereum
        tokenContract:
          type: string
          description: The token contract address (only present for tokens on supported networks)
          example: "0xdac17f958d2ee523a2206206994597c13d831ec7"
        deposit:
          type: boolean
          description: Whether deposits are available on this network
          example: true
        withdraw:
          type: boolean
          description: Whether withdrawals are available on this network
          example: true
    Currency:
      type: object
      properties:
        symbol:
          type: string
          description: The currency symbol
          example: USDT
        isActive:
          type: boolean
          description: Whether the currency is currently active
          example: true
        shortName:
          type: string
          description: The short name of the currency
          example: USDT
        longName:
          type: string
          description: The full name of the currency
          example: Tether
        decimalPlaces:
          type: string
          description: The number of decimal places for the currency
          example: "2"
        withdrawalDecimalPlaces:
          type: string
          description: The number of decimal places for withdrawals
          example: "2"
        collateral:
          type: boolean
          description: Whether the currency can be used as collateral
          example: true
        collateralWeight:
          type: string
          description: The collateral weight of the currency
          example: "0.99"
        defaultNetworkType:
          type: string
          description: The network type identifier that will be used if a network type is not specified on a deposit or withdrawal request
          example: Ethereum
        supportedNetworks:
          type: array
          description: >
            A list of networks that are available to use for deposits and/or withdrawals for a given currency.
            If this property is not present, it means that both withdrawals and deposits are not available
            for the specified currency on VALR.
          items:
            $ref: "#/components/schemas/SupportedNetwork"
    CurrencyPair:
      type: object
      properties:
        symbol:
          type: string
          description: The currency pair symbol
          example: ETHZAR
        baseCurrency:
          type: string
          description: The base currency symbol
          example: ETH
        quoteCurrency:
          type: string
          description: The quote currency symbol
          example: ZAR
        shortName:
          type: string
          description: The short display name for the currency pair
          example: ETH/ZAR
        active:
          type: boolean
          description: Whether the currency pair is currently active for trading
          example: true
        minBaseAmount:
          type: string
          description: The minimum base currency amount for orders
          example: "0.0002"
        maxBaseAmount:
          type: string
          description: The maximum base currency amount for orders
          example: "69.21"
        minQuoteAmount:
          type: string
          description: The minimum quote currency amount for orders
          example: "10"
        maxQuoteAmount:
          type: string
          description: The maximum quote currency amount for orders
          example: "5000000"
        tickSize:
          type: string
          description: The minimum price increment (tick size) for the currency pair
          example: "1"
        baseDecimalPlaces:
          type: string
          description: The number of decimal places for the base currency
          example: "8"
        marginTradingAllowed:
          type: boolean
          description: Whether margin trading is allowed for this currency pair
          example: true
        currencyPairType:
          type: string
          description: The type of currency pair
          enum: [SPOT, FUTURE]
          example: SPOT
        initialMarginFraction:
          type: string
          description: The initial margin fraction required (present for FUTURE pairs and SPOT pairs with margin trading)
          example: "0.2"
        maintenanceMarginFraction:
          type: string
          description: The maintenance margin fraction (present for FUTURE pairs and SPOT pairs with margin trading)
          example: "0.1"
        autoCloseMarginFraction:
          type: string
          description: The auto-close margin fraction (present for FUTURE pairs and SPOT pairs with margin trading)
          example: "0.033333333"
    FundingRateHistory:
      type: object
      properties:
        currencyPair:
          type: string
          description: The name of the perpetual futures contract expressed as base, quote, PERP, e.g. BTCUSDTPERP
          example: BTCUSDTPERP
        fundingRate:
          type: string
          description: >
            The funding rate that was used for the reported funding period.
            If the rate is positive, longs paid shorts. Alternatively, if the rate is negative, shorts paid longs.
          example: "0.000277"
        fundingTime:
          type: string
          format: date-time
          description: The date and time of the funding run in ISO 8601 format
          example: "2025-07-16T11:00:00Z"
    FuturesInfo:
      type: object
      properties:
        currencyPair:
          type: string
          description: The name of the perpetual futures contract expressed as base, quote, PERP, e.g. BTCUSDTPERP
          example: BTCUSDTPERP
        estimatedFundingRate:
          type: string
          description: The estimated funding rate for the futures pair. If the rate is positive, longs pay shorts. Alternatively, if the rate is negative, shorts pay longs.
          example: "-0.000001"
        openInterest:
          type: string
          description: The open interest for the futures pair
          example: "1.8401"
        nextFundingRun:
          type: integer
          format: int64
          description: The timestamp (in milliseconds) of the next funding run
          example: 1750165200000
        nextPnlRun:
          type: integer
          format: int64
          description: The timestamp (in milliseconds) of the next PnL run
          example: 1750176000000
    LoanInfo:
      type: object
      properties:
        lendingSupported:
          type: boolean
          description: Whether lending is supported for this currency
          example: true
        shortName:
          type: string
          description: The short name of the currency
          example: ZAR
        minimumRate:
          type: string
          description: The minimum lending rate for this currency
          example: "0.00000685"
        maximumRate:
          type: string
          description: The maximum lending rate for this currency (only present when lendingSupported is true)
          example: "0.00036"
        minimumAmount:
          type: string
          description: The minimum lending amount for this currency
          example: "500"
        maximumAmount:
          type: string
          description: The maximum lending amount for this currency (only present when lendingSupported is true)
          example: "100000000"
      required:
        - lendingSupported
        - shortName
        - minimumRate
        - minimumAmount
    MarkPriceBucket:
      type: object
      properties:
        currencyPairSymbol:
          type: string
          description: The currency pair symbol
          example: BTCUSDT
        bucketPeriodInSeconds:
          type: integer
          description: The bucket period in seconds
          example: 60
        startTime:
          type: string
          format: date-time
          description: The start time of the bucket in ISO 8601 format
          example: "2025-07-16T11:39:00Z"
        open:
          type: string
          description: The opening mark price for the bucket
          example: "118834"
        close:
          type: string
          description: The closing mark price for the bucket
          example: "118834"
        high:
          type: string
          description: The highest mark price for the bucket
          example: "118834"
        low:
          type: string
          description: The lowest mark price for the bucket
          example: "118834"
    PriceBucket:
      type: object
      properties:
        currencyPairSymbol:
          type: string
          description: The currency pair symbol
          example: BTCUSDC
        bucketPeriodInSeconds:
          type: integer
          description: The bucket period in seconds
          example: 60
        startTime:
          type: string
          format: date-time
          description: The start time of the bucket in ISO 8601 format
          example: "2025-07-22T12:56:00Z"
        open:
          type: string
          description: The opening price for the bucket
          example: "119350"
        high:
          type: string
          description: The highest price for the bucket
          example: "119350"
        low:
          type: string
          description: The lowest price for the bucket
          example: "119350"
        close:
          type: string
          description: The closing price for the bucket
          example: "119350"
        volume:
          type: string
          description: The volume in the base currency for the bucket
          example: "0"
        quoteVolume:
          type: string
          description: The volume in the quote currency for the bucket
          example: "0"
    MarketSummary:
      type: object
      properties:
        currencyPair:
          type: string
          description: The currency pair symbol
          example: BTCUSDTPERP
        askPrice:
          type: string
          description: The current ask price
          example: "105656"
        bidPrice:
          type: string
          description: The current bid price
          example: "105594"
        lastTradedPrice:
          type: string
          description: The last traded price
          example: "105611"
        previousClosePrice:
          type: string
          description: The previous close price
          example: "106678"
        baseVolume:
          type: string
          description: The volume in the base currency
          example: "1.0638"
        quoteVolume:
          type: string
          description: The volume in the quote currency
          example: "113947.8777"
        highPrice:
          type: string
          description: The highest price for the period
          example: "108840"
        lowPrice:
          type: string
          description: The lowest price for the period
          example: "105600"
        created:
          type: string
          format: date-time
          description: The timestamp when this summary was created
          example: "2025-06-17T12:34:32.069Z"
        changeFromPrevious:
          type: string
          description: The percentage change from the previous close price
          example: "-1"
        markPrice:
          type: string
          description: A reference price for a trading pair calculated as the median of last traded, best bid and best ask
          example: "105628"
    OrderBookEntry:
      type: object
      properties:
        side:
          type: string
          description: The side of the order
          enum: [buy, sell]
          example: buy
        quantity:
          type: string
          description: The quantity of the order
          example: "1.23136671"
        price:
          type: string
          description: The price of the order
          example: "81400"
        currencyPair:
          type: string
          description: The currency pair symbol
          example: BTCUSDT
        orderCount:
          type: integer
          description: The number of orders aggregated at this price level
          example: 17
    Trade:
      type: object
      properties:
        price:
          type: string
          description: The price at which the trade was executed
          example: "93129"
        quantity:
          type: string
          description: The quantity traded
          example: "0.00119363"
        currencyPair:
          type: string
          description: The currency pair symbol
          example: BTCUSDT
        tradedAt:
          type: string
          format: date-time
          description: The timestamp when the trade was executed
          example: "2025-07-15T12:19:21.501Z"
        takerSide:
          type: string
          description: The side of the taker order
          enum: [buy, sell]
          example: buy
        sequenceId:
          type: integer
          format: int64
          description: The sequence ID of the trade
          example: 1368928567986638800
        id:
          type: string
          description: The unique identifier of the trade
          example: "01980e06-771d-73f1-aec8-b2fe69d943f1"
        quoteVolume:
          type: string
          description: The volume in the quote currency
          example: "111.16156827"
    OrderBook:
      type: object
      properties:
        Asks:
          type: array
          description: List of ask orders, sorted by price ascending
          items:
            $ref: "#/components/schemas/OrderBookEntry"
        Bids:
          type: array
          description: List of bid orders, sorted by price descending
          items:
            $ref: "#/components/schemas/OrderBookEntry"
        LastChange:
          type: string
          format: date-time
          description: The timestamp of the last change to the order book
          example: "2025-07-15T12:19:21.501Z"
        SequenceNumber:
          type: integer
          description: The sequence number of the order book
          example: 282886
    OrderBookFullEntry:
      type: object
      properties:
        side:
          type: string
          description: The side of the order
          enum: [buy, sell]
          example: buy
        quantity:
          type: string
          description: The quantity of the order
          example: "1.23117023"
        price:
          type: string
          description: The price of the order
          example: "81400"
        currencyPair:
          type: string
          description: The currency pair symbol
          example: BTCUSDT
        id:
          type: string
          description: The unique identifier of the order
          example: "01966bf8-308b-7fb9-a6db-bf2d6122f08b"
        positionAtPrice:
          type: integer
          description: The position of this order at this price level (orders at the same price are not aggregated)
          example: 1
    OrderBookFull:
      type: object
      properties:
        Asks:
          type: array
          description: List of ask orders, sorted by price ascending. Orders of the same price are NOT aggregated.
          items:
            $ref: "#/components/schemas/OrderBookFullEntry"
        Bids:
          type: array
          description: List of bid orders, sorted by price descending. Orders of the same price are NOT aggregated.
          items:
            $ref: "#/components/schemas/OrderBookFullEntry"
        LastChange:
          type: string
          format: date-time
          description: The timestamp of the last change to the order book
          example: "2025-07-15T12:19:21.501Z"
        SequenceNumber:
          type: integer
          description: The sequence number of the order book
          example: 282886
    CurrencyPairOrderTypes:
      type: object
      properties:
        currencyPair:
          type: string
          description: The currency pair symbol
          example: ETHZAR
        orderTypes:
          type: array
          description: Array of order types supported for this currency pair
          items:
            type: string
            enum:
              - LIMIT_POST_ONLY
              - LIMIT
              - MARKET
              - SIMPLE
              - STOP_LOSS_LIMIT
              - TAKE_PROFIT_LIMIT
              - LIMIT_REDUCE_ONLY
              - MARKET_REDUCE_ONLY
          example:
            - LIMIT_POST_ONLY
            - LIMIT
            - MARKET
            - SIMPLE
            - STOP_LOSS_LIMIT
            - TAKE_PROFIT_LIMIT
    AllowedWithdrawAddress:
      type: object
      properties:
        currency:
          type: string
          description: The currency symbol
          example: BTC
        address:
          type: string
          description: The withdrawal address for the currency
          example: "2N1QAxqSn2B3CiHsLSzeReuysQXyCT8ZXWj"
      required:
        - currency
        - address
    ApiKeyInfo:
      type: object
      properties:
        label:
          type: string
          description: The label/name of the API key
          example: "Full Access Whitelisted IP and Address"
        permissions:
          type: array
          description: List of permissions granted to this API key
          items:
            type: string
            enum: ["View access", "Trade", "Withdraw"]
          example:
            - "View access"
            - "Trade"
            - "Withdraw"
        addedAt:
          type: string
          format: date-time
          description: The date and time when the API key was created
          example: "2021-09-11T18:28:37.791401Z"
        allowedIpAddressCidr:
          type: string
          description: >
            The whitelisted IP address range in CIDR notation.
            Only present if IP whitelisting is configured for this API key.
          example: "41.157.66.231/32"
        allowedWithdrawAddressList:
          type: array
          description: >
            List of whitelisted withdrawal addresses by currency.
            Only present if withdrawal address whitelisting is configured for this API key.
          items:
            $ref: "#/components/schemas/AllowedWithdrawAddress"
          example:
            - currency: BTC
              address: "2N1QAxqSn2B3CiHsLSzeReuysQXyCT8ZXWj"
      required:
        - label
        - permissions
        - addedAt
    Subaccount:
      type: object
      properties:
        id:
          type: string
          description: The id of the subaccount
          example: "903671169785507840"
        label:
          type: string
          description: The name given to the subaccount
          example: "SubAccountWithKyc"
        firstName:
          type: string
          description: The first name of the subaccount holder. Only present if KYC info is available.
          example: "John"
        lastName:
          type: string
          description: The last name of the subaccount holder. Only present if KYC info is available.
          example: "Doe"
        dateOfBirth:
          type: string
          format: date
          description: The date of birth of the subaccount holder. Only present if KYC info is available.
          example: "1985-06-15"
        residentialCountry:
          type: string
          description: >
            The residential country of the subaccount holder, which refers to the country where
            the account holder currently resides. Only present if KYC info is available.
          example: "ZA"
        identityIssuingCountry:
          type: string
          description: >
            The identity issuing country of the subaccount holder, which refers to the country as
            verified by an official ID document (such as an ID card, driver's license, or passport).
            Only present if KYC info is available.
          example: "ZA"
        identityType:
          type: string
          description: >
            The identity type refers to the type of ID document used to verify the subaccount holder's identity.
            Only present if KYC info is available.
          enum: [PASSPORT, ID_CARD, DRIVERS_LICENSE]
          example: "PASSPORT"
        identityNumber:
          type: string
          description: >
            The identity number of the subaccount holder. Only present if KYC info is available.
            Note: The sensitive subaccount KYC data is encrypted at rest.
          example: "A123456789"
        identityExpiryDate:
          type: string
          format: date
          description: >
            The date on which the ID of the subaccount holder expires. Only present if KYC info is available.
          example: "2030-12-31"
        cellNumber:
          type: string
          description: The cell phone number of the subaccount holder. Only present if KYC info is available.
          example: "+12345678901234"
        email:
          type: string
          format: email
          description: The email address of the subaccount holder. Only present if KYC info is available.
          example: "johndoe@example.com"
        purpose:
          type: string
          description: The purpose of the subaccount. Only present if KYC info is available.
          enum: [TRADING, INVESTMENT, OTHER]
          example: "TRADING"
        employmentStatus:
          type: string
          description: The employment status of the subaccount holder. Only present if KYC info is available.
          enum: [EMPLOYED_FULL_TIME, EMPLOYED_PART_TIME, SELF_EMPLOYED, UNEMPLOYED, STUDENT, RETIRED, OTHER]
          example: "EMPLOYED_FULL_TIME"
        sourceOfFunds:
          type: string
          description: The source of funds for the subaccount. Only present if KYC info is available.
          enum: [ALLOWANCE, SALARY, BUSINESS_INCOME, INVESTMENT_INCOME, GIFT, INHERITANCE, OTHER]
          example: "ALLOWANCE"
      required:
        - id
        - label
    SubaccountSummary:
      type: object
      properties:
        id:
          type: string
          description: The id of the subaccount
          example: "903671169785507840"
        label:
          type: string
          description: The name given to the subaccount
          example: "Arbitrage Acc 001"
      required:
        - id
        - label
    AccountBalance:
      type: object
      properties:
        currency:
          type: string
          description: The currency symbol
          example: "ZAR"
        available:
          type: string
          description: The available balance (not reserved)
          example: "1265172.33437585412"
        reserved:
          type: string
          description: The reserved balance
          example: "0"
        total:
          type: string
          description: The total balance
          example: "1665172.33437585412"
        updatedAt:
          type: string
          format: date-time
          description: The timestamp when the balance was last updated
          example: "2025-07-01T14:14:37.218Z"
        lendReserved:
          type: string
          description: The amount reserved for lending
          example: "400000"
        borrowReserved:
          type: string
          description: The amount reserved for borrowing
          example: "0"
        borrowedAmount:
          type: string
          description: The amount currently borrowed
          example: "0"
      required:
        - currency
        - available
        - reserved
        - total
        - updatedAt
        - lendReserved
        - borrowReserved
        - borrowedAmount
    AccountBalances:
      type: object
      properties:
        account:
          type: object
          description: The account information
          properties:
            label:
              type: string
              description: The name of the account
              example: "Primary"
            id:
              type: string
              description: The id of the account
              example: "0"
          required:
            - label
            - id
        balances:
          type: array
          description: >
            Array of balances for this account. Only balances greater than 0 are returned.
            Accounts with neither balance nor debt will have an empty array.
          items:
            $ref: "#/components/schemas/AccountBalance"
          example: []
      required:
        - account
        - balances
  responses:
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    ServiceUnavailable:
      description: VALR is in read-only mode
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
